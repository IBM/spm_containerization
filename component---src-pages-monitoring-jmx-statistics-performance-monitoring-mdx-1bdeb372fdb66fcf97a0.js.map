{"version":3,"file":"component---src-pages-monitoring-jmx-statistics-performance-monitoring-mdx-1bdeb372fdb66fcf97a0.js","mappings":"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","sources":["webpack://spm-kubernetes/./src/pages/monitoring/jmx-statistics-performance-monitoring.mdx"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/spm-kubernetes/spm-kubernetes/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\nconst InlineNotification = makeShortcode(\"InlineNotification\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h2>{`What is Cúram JMX?`}</h2>\n    <p>{`Cúram JMX statistics provides operational data from a running Merative Social Program Management (SPM) application.\nJMX statistics for use with a traditional application server.`}</p>\n    <p>{`For more information about JMX statistics, see the `}<em parentName=\"p\">{`Social Program Management Cúram JMX Configuration Guide`}</em>{`.`}</p>\n    <InlineNotification mdxType=\"InlineNotification\">\n      <p>{`The Social Program Management PDF documentation is available to download from `}<a parentName=\"p\" {...{\n          \"href\": \"https://curam-spm-devops.github.io/wh-support-docs/spm/pdf-documentation/\"\n        }}>{`Merative Support Docs`}</a>{`.`}</p>\n    </InlineNotification>\n    <h3>{`Cúram JMX Kubernetes Limitations`}</h3>\n    <p>{`Cúram JMX statistics behave similarly in Kubernetes, but have the following limitations:\nUsing the Administration Application`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Access by using the SPM Administration Application is not supported because:`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Not all pods have the requisite SPM client installed, which means JMS performance is unavailable using this access mechanism.`}</li>\n          <li parentName=\"ul\">{`The reverse proxy nature of Kubernetes means that even for the pods with clients installed, identifying the correct target server would be difficult.`}</li>\n        </ul>\n      </li>\n    </ul>\n    <p>{`Therefore, for Kubernetes you are restricted to using the timer-based access method. For more information about JMX statistics, see `}<strong parentName=\"p\">{`Using the JMX timer`}</strong>{` in the `}<em parentName=\"p\">{`Social Program Management Cúram JMX Configuration Guide`}</em>{`.`}</p>\n    <h2>{`Cúram JMX timer-based statistics on Kubernetes`}</h2>\n    <p>{`This mechanism writes the JMX statistics periodically at a file system location. The advantage of this mechanism is that it can be used for collecting statistics from every server in an environment`}</p>\n    <p>{`The primary properties used to configure timer-based statistics are integrated into the Helm Charts.`}</p>\n    <p>{`A prerequisite for using timer-based SPM JMX statistics is to override `}<inlineCode parentName=\"p\">{`global.apps.common.persistence.enabled=true`}</inlineCode>{`.`}</p>\n    <p>{`You must also consider the other persistence-related settings and configure them appropriately.`}</p>\n    <h3>{`Cúram JMX statistics persisteance`}</h3>\n    <p>{`Persistence is required for timer-based statistics because the non-permanent nature of pods means that as they come and go, you might need statistics from an earlier execution.`}</p>\n    <p>{`Enable timer-based JMX statistics with a `}<inlineCode parentName=\"p\">{`global.apps.common.persistence.jmxstats.enabled=true`}</inlineCode>{` override.\nOnce configured, the following SPM properties are added to the Liberty pod jvm.options files with the defaults shown:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`-Dcuram.jmx.output_statistics_timer_enabled=true\n-Dcuram.jmx.output_statistics_timer_folder=/tmp/jmx/\n-Dcuram.jmx.output_statistics_timer_period=60000\n`}</code></pre>\n    <p>{`You can override the value of the timer period by using `}<inlineCode parentName=\"p\">{`global.apps.common.persistence.jmxstats.timerPeriod`}</inlineCode>{` where the value is specified as the\nnumber of milliseconds between each timer. For example, 60000 = 1 minute.`}</p>\n    <p>{`Inside the specified timer folder are the statistics XML files, named with a datetimestamp and pod name.`}</p>\n    <p><strong parentName=\"p\">{`For example:`}</strong><inlineCode parentName=\"p\">{`202009171025363411@bugsbunny-apps-curam-producer-6c9bf7dc46-snw4w-1661122509.xml`}</inlineCode></p>\n    <h2>{`Considerations`}</h2>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`The default of `}<inlineCode parentName=\"p\">{`1 minute`}</inlineCode>{` for the timer period might be too short because over an extended time, depending upon the amount of application activity, the persistent storage could be exhausted.`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Consider also the length of time a pod will run; if the timer period is too short, data since the last timer period is lost.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`No timer-based statistics are generated until the first login or JMS message is processed.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Turn off statistics for running pods by editing the configmaps where `}<inlineCode parentName=\"p\">{`-Dcuram.jmx.output_statistics_timer_enabled=true`}</inlineCode>{` is set, changing the value to false, and restarting the pods.\nFor example:`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Use the `}<inlineCode parentName=\"li\">{`kubectl get configmaps`}</inlineCode>{` command to list all the configmaps.`}</li>\n          <li parentName=\"ul\">{`The configmaps you need to change are those named with `}<inlineCode parentName=\"li\">{`*-jvm-override-*`}</inlineCode>{` and the number and names of the configmaps vary depending on your configuration.`}</li>\n          <li parentName=\"ul\">{`For each configmap, use the `}<inlineCode parentName=\"li\">{`kubectl edit configmap`}</inlineCode>{` command to change the `}<inlineCode parentName=\"li\">{`curam.jmx.output_statistics_timer_enabled`}</inlineCode>{` setting to false.`}</li>\n          <li parentName=\"ul\">{`Use the `}<inlineCode parentName=\"li\">{`kubectl delete pod`}</inlineCode>{` command for each of the application producer and consumer pods that have a corresponding application name to the configmap.`}</li>\n          <li parentName=\"ul\">{`On restart the new pod no longer generates statistics files.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`By default, statistics are accumulated over the life of a pod; therefore, the last file generated is a superset of all the other files for that pod, therefore and you should only need the latest file.`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`There is a property to change this behavior so each period resets the statistics, but then you would have to address how to amalgamate the data and make sense of it; so,changing this is not recommended.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`In support of EJB timers, IBM WebSphere Liberty dynamically creates three tables each time a pod starts; a `}<inlineCode parentName=\"p\">{`PART`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`PROP`}</inlineCode>{`, and `}<inlineCode parentName=\"p\">{`TASK`}</inlineCode>{` table.`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`The amount of data in these tables is small; but, over time could result in a large number of these tables in your database.`}</li>\n          <li parentName=\"ul\">{`You should monitor these tables and drop those for pods that no longer exist.`}</li>\n          <li parentName=\"ul\">{`These tables are prefixed with `}<inlineCode parentName=\"li\">{`EJBTIMER_`}</inlineCode>{`, followed by the pod name. For example, for the bugsbunny-apps-curam-consumer deployment, the following three tables were created for a single pod:`}</li>\n        </ul>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`  EJBTIMER_BUGSBUNNY_APPS_CURAM_CONSUMER_786586FD5F_BGMGWPART\n  EJBTIMER_BUGSBUNNY_APPS_CURAM_CONSUMER_786586FD5F_BGMGWPROP\n  EJBTIMER_BUGSBUNNY_APPS_CURAM_CONSUMER_786586FD5F_BGMGWTASK\n`}</code></pre>\n        <p parentName=\"li\">{`In the context of Kubernetes pods, if the JMX and Liberty metrics are being made available from the pods by the JMX Exporter to be scraped by Prometheus,\nthe following rules file may be employed to ensure that the metrics are surfaced and labelled appropriately.`}</p>\n        <p parentName=\"li\"><a parentName=\"p\" {...{\n            \"href\": \"/spm-kubernetes/resources/example_jmx_rules.yml\"\n          }}>{`Example jmxExporter rules file`}</a></p>\n      </li>\n    </ul>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","InlineNotification","name","props","console","warn","mdx","layoutProps","MDXLayout","DefaultLayout","MDXContent","_ref","components","_objectWithoutProperties","_excluded","Object","assign","mdxType","parentName","isMDXComponent"],"sourceRoot":""}