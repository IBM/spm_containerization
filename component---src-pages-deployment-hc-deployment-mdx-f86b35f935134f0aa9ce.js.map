{"version":3,"file":"component---src-pages-deployment-hc-deployment-mdx-f86b35f935134f0aa9ce.js","mappings":"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","sources":["webpack://spm-kubernetes/./src/pages/deployment/hc_deployment.mdx"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/spm-kubernetes/spm-kubernetes/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\nconst InlineNotification = makeShortcode(\"InlineNotification\");\nconst Tabs = makeShortcode(\"Tabs\");\nconst Tab = makeShortcode(\"Tab\");\nconst Row = makeShortcode(\"Row\");\nconst Column = makeShortcode(\"Column\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <InlineNotification mdxType=\"InlineNotification\">\n      <p><strong parentName=\"p\">{`Note:`}</strong>{` As of Release 20.7.0, the Helm version used to verify this runbook is 3.2. All the Helm commands that are used in this runbook are based on Helm v3.`}</p>\n    </InlineNotification>\n    <p>{`In the following `}<inlineCode parentName=\"p\">{`helm install`}</inlineCode>{` command, we are using `}<inlineCode parentName=\"p\">{`releasename`}</inlineCode>{` as the value for the `}<inlineCode parentName=\"p\">{`helm release name`}</inlineCode>{`. A release name is an arbitrary name that you choose for your\ndeployment. It must be all lowercase. All kubernetes objects in your deployment will be prefixed with whatever value you provide.`}</p>\n    <p>{`For now you could just use `}<inlineCode parentName=\"p\">{`releasename`}</inlineCode>{` and for more information see `}<a parentName=\"p\" {...{\n        \"href\": \"https://helm.sh/docs/intro/using_helm/\"\n      }}>{`the helm documentation`}</a>{`.`}</p>\n    <InlineNotification mdxType=\"InlineNotification\">\n      <p><strong parentName=\"p\">{`Note:`}</strong>{` Helm v3 (`}<inlineCode parentName=\"p\">{`releasename`}</inlineCode>{` is mandatory for Helm v3)`}</p>\n    </InlineNotification>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`helm install releasename local-development/spm\n`}</code></pre>\n    <p>{`The `}<inlineCode parentName=\"p\">{`helm install`}</inlineCode>{` command installs the Helm Charts in the order in which they were loaded in the repository, with all the values defined in the files.\nHowever, as described in `}<a parentName=\"p\" {...{\n        \"href\": \"/spm-kubernetes/build-images/setup_docker_context\"\n      }}>{`Setting up the DockerÂ® context`}</a>{`, you can override the configuration value by running the following shell script:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`helm install releasename local-development/spm -f override-values.yaml\n`}</code></pre>\n    <h3>{`Sample `}<inlineCode parentName=\"h3\">{`override-values.yaml`}</inlineCode>{` files`}</h3>\n    <p>{`The following three override files for Minikube, AKS, and CRC are intended to be used with the config options listed in the\n`}<a parentName=\"p\" {...{\n        \"href\": \"/spm-kubernetes/deployment/config-reference\"\n      }}>{`Configuration Reference`}</a>{` topic. The minimum details that need to be filled out for a successful deployment\nare the registry, database, and ingress details.`}</p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"/spm-kubernetes/resources/minikube-values.yaml\"\n        }}>{`Minikube`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"/spm-kubernetes/resources/crc-values.yaml\"\n        }}>{`CodeReady Containers`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"/spm-kubernetes/resources/aks-values.yaml\"\n        }}>{`Azure Kubernetes Service`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"/spm-kubernetes/resources/tuning-values.yaml\"\n        }}>{`Initial Tuning Settings`}</a>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Can be used for AKS or OpenShift`}</li>\n        </ul>\n      </li>\n    </ul>\n    <InlineNotification mdxType=\"InlineNotification\">\n      <p><strong parentName=\"p\">{`Note on AKS overrides:`}</strong></p>\n      <ul>\n        <li parentName=\"ul\">{`The full image name is based on the `}<inlineCode parentName=\"li\">{`registry`}</inlineCode>{`, `}<inlineCode parentName=\"li\">{`imageLibrary`}</inlineCode>{`, `}<inlineCode parentName=\"li\">{`imagePrefix`}</inlineCode>{`, and `}<inlineCode parentName=\"li\">{`imageTag`}</inlineCode>{` keys nested under `}<inlineCode parentName=\"li\">{`global.images`}</inlineCode>{` as follows:`}\n          <ul parentName=\"li\">\n            <li parentName=\"ul\"><inlineCode parentName=\"li\">{`{registry}/{imageLibrary}/{imagePrefix}curam:{imageTag}`}</inlineCode></li>\n            <li parentName=\"ul\">{`With the given values, the resulting image name will look like this: `}<inlineCode parentName=\"li\">{`example.azurecr.io/foo-library/test_curam:latest`}</inlineCode></li>\n          </ul>\n        </li>\n        <li parentName=\"ul\">{`IAM credentials for the `}<a parentName=\"li\" {...{\n            \"href\": \"https://cloud.ibm.com/docs/containers?topic=containers-registry\"\n          }}>{`IBM Container Registry`}</a>{` (`}<inlineCode parentName=\"li\">{`global.imagePullSecret`}</inlineCode>{`) must be provided.`}</li>\n        <li parentName=\"ul\">{`The `}<a parentName=\"li\" {...{\n            \"href\": \"https://cloud.ibm.com/docs/containers?topic=containers-ingress_annotation#alb-id\"\n          }}>{`Application Load Balancer IDs`}</a>{` (`}<inlineCode parentName=\"li\">{`ingress.annotations.\"ingress.bluemix.net/ALB-ID\"`}</inlineCode>{`) must be provided for the Ingress resource to be created correctly.`}</li>\n      </ul>\n    </InlineNotification>\n    <InlineNotification mdxType=\"InlineNotification\">\n      <p><strong parentName=\"p\">{`Note`}</strong>{`: If storage has been initialized using a version of the runbook older than 20.9.0, you will need to update your\noverride values to include a supplementary group:`}</p>\n      <pre><code parentName=\"pre\" {...{\n          \"className\": \"language-yaml\"\n        }}>{`global:\n  mq:\n    security:\n      context:\n        supplementalGroups: [888]\n`}</code></pre>\n      <p>{`This is due to a update in IBM MQ, the details of which can be found `}<a parentName=\"p\" {...{\n          \"href\": \"https://github.com/IBM/charts/blob/master/stable/ibm-mqadvanced-server-dev/RELEASENOTES.md\"\n        }}>{`here`}</a>{`.`}</p>\n    </InlineNotification>\n    <p>{`The license agreements for the IBMÂ® WebSphereÂ® Liberty and IBM WebSphere MQ images must be accepted in order to proceed with the deployment of these elements. This can be done by setting the `}<inlineCode parentName=\"p\">{`global.license`}</inlineCode>{` property to `}<inlineCode parentName=\"p\">{`accept`}</inlineCode>{`.`}</p>\n    <p>{`The respective license agreements can be reviewed by running the following commands:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`# IBM WebSphere Liberty\ndocker run --rm -e LICENSE=view ibmcom/websphere-liberty:24.0.0.6-full-java8-ibmjava-ubi\n\n# IBM WebSphere MQ\ndocker run --rm -e LICENSE=view ibmcom/mq:9.1.3.0\n`}</code></pre>\n    <h2>{`Status of the system`}</h2>\n    <p>{`The `}<inlineCode parentName=\"p\">{`helm install`}</inlineCode>{` command shows all the Kubernetes objects and also runs the Merative Social Program Management (SPM) containers.\nYou can track the status of the SPM containers on real time by running the following command:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`kubectl get pods -w\n\nNAME                                              READY  STATUS    RESTARTS  AGE\nreleasename-apps-curam-consumer-595c8bf95f-zn2l5  0/1    Init 3/4  0         5m\nreleasename-apps-curam-producer-6b5569c4ff-nvxtd  1/1    Running   0         5m\nreleasename-apps-rest-consumer-85b4865b9d-wr6hj   0/1    Init 3/4  0         5m\nreleasename-apps-rest-producer-cd8fdbbbf-j2mjj    0/1    Init 3/4  0         5m\nreleasename-uawebapp-7cdd64987-qx8l8              1/1    Running   0         5m\nreleasename-web-67697ffb8b-fdsk2                  1/1    Running   0         5m\nreleasename-mqserver-curam-7f45bcd64d-rlqns       1/1    Running   0         5m\nreleasename-mqserver-rest-544c5b4758-pnbpz        1/1    Running   0         5m\nreleasename-xmlserver-77d6d9b75d-4xr8k            1/1    Running   0         5m\n\n`}</code></pre>\n    <p>{`The command lists the pods and their status, where each status change is on a new line.`}</p>\n    <p>{`Some of the pods have initialization steps, so they are not shown until the steps are completed.`}</p>\n    <p>{`The output of the `}<inlineCode parentName=\"p\">{`kubectl get pods`}</inlineCode>{` command provides the names of the pods that you can use to substitute for `}<inlineCode parentName=\"p\">{`podname`}</inlineCode>{` in the following example commands.\nFor example, the Liberty pod that contains SPM code is a name that uses a pattern of: `}<inlineCode parentName=\"p\">{`releasename-apps-curam-`}</inlineCode>{`.`}</p>\n    <p>{`You can also describe a pod by running the following command:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`kubectl describe pod/pod name\n`}</code></pre>\n    <p>{`You can also read the log when the status is `}<inlineCode parentName=\"p\">{`running`}</inlineCode>{`, by running the following command:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`kubectl logs -f pod/podname\n`}</code></pre>\n    <h2>{`Accessing the application`}</h2>\n    <p>{`To access the application, a URL is provided to access the pod within the cluster. This access is provided using Ingress resources on Kubernetes, and Routes resources on OpenShift.`}</p>\n    <p>{`Example URLs:`}</p>\n    <Tabs mdxType=\"Tabs\">\n      <Tab label=\"Minikube\" mdxType=\"Tab\">\n        <Row mdxType=\"Row\">\n          <Column mdxType=\"Column\">\n            <pre><code parentName=\"pre\" {...{\n                \"className\": \"language-shell\"\n              }}>{`https://minikube.local/Curam\n`}</code></pre>\n          </Column>\n        </Row>\n      </Tab>\n      <Tab label=\"CRC\" mdxType=\"Tab\">\n        <Row mdxType=\"Row\">\n          <Column mdxType=\"Column\">\n            <pre><code parentName=\"pre\" {...{\n                \"className\": \"language-shell\"\n              }}>{`https://spm-ocp.apps-crc.testing/Curam\n`}</code></pre>\n          </Column>\n        </Row>\n      </Tab>\n      <Tab label=\"AKS\" mdxType=\"Tab\">\n        <Row mdxType=\"Row\">\n          <Column mdxType=\"Column\">\n            <pre><code parentName=\"pre\" {...{\n                \"className\": \"language-shell\"\n              }}>{`https://spm.<cluster_name>-<hash>-0000.<region>.containers.appdomain.cloud/Curam\n`}</code></pre>\n          </Column>\n        </Row>\n      </Tab>\n    </Tabs>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","makeShortcode","name","props","console","warn","mdx","InlineNotification","Tabs","Tab","Row","Column","layoutProps","MDXLayout","DefaultLayout","MDXContent","_ref","components","_objectWithoutProperties","_excluded","Object","assign","mdxType","parentName","label","isMDXComponent"],"sourceRoot":""}